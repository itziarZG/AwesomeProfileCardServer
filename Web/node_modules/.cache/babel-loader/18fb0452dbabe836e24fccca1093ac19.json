{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/ichi/Desktop/ADALAB/REPOSITORIOS/AwesomeProfileCardServer/Web/src/components/CardGenerator.js\";\nimport React from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport PreviewCard from \"./PreviewCard\";\nimport Form from \"./Form\";\nimport getDataFromApi from \"../service/api.js\";\n\nclass CardGenerator extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      palette: 1,\n      name: \"\",\n      job: \"\",\n      phone: \"\",\n      photo: {\n        url: \"\",\n        isAvatarDefault: false\n      },\n      email: \"\",\n      linkedin: \"\",\n      github: \"\",\n      apiObject: {\n        isLoading: false,\n        apiError: \"\",\n        apiCardURL: \"\",\n        apiSuccess: false,\n        apiCall: false\n      },\n      isEmpty: true\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.updateAvatar = this.updateAvatar.bind(this);\n    this.handlePalette = this.handlePalette.bind(this);\n    this.setLocalStorage = this.setLocalStorage.bind(this);\n    this.getLocalStorage = this.getLocalStorage.bind(this);\n    this.handleClickCreate = this.handleClickCreate.bind(this);\n    this.checkForm = this.checkForm.bind(this);\n  }\n\n  componentDidMount() {\n    // console.log(\"entro en didmount\");\n    this.getLocalStorage(\"data\");\n    this.checkForm();\n  }\n\n  componentDidUpdate() {\n    // console.log(\"entro en didupdate\");\n    this.setLocalStorage();\n  }\n\n  setLocalStorage() {\n    const data = {\n      palette: this.state.palette,\n      name: this.state.name,\n      job: this.state.job,\n      phone: this.state.phone,\n      photo: this.state.photo.url,\n      email: this.state.email,\n      linkedin: this.state.linkedin,\n      github: this.state.github\n    };\n    localStorage.setItem(\"data\", JSON.stringify(data));\n  }\n\n  getLocalStorage() {\n    if (localStorage.getItem(\"data\")) {\n      const data = JSON.parse(localStorage.getItem(\"data\"));\n      this.setState({\n        palette: data.palette,\n        name: data.name,\n        job: data.job,\n        phone: data.phone,\n        photo: {\n          url: data.photo\n        },\n        email: data.email,\n        linkedin: data.linkedin,\n        github: data.github\n      });\n    }\n  }\n\n  updateAvatar(img) {\n    const {\n      photo\n    } = this.state;\n    this.setState(() => {\n      const newPhoto = { ...photo,\n        url: img,\n        isAvatarDefault: false\n      };\n      return {\n        photo: newPhoto\n      };\n    });\n  }\n\n  handleReset() {\n    this.setState(() => {\n      return {\n        palette: 1,\n        name: \"\",\n        job: \"\",\n        phone: \"\",\n        photo: \"\",\n        email: \"\",\n        linkedin: \"\",\n        github: \"\",\n        isEmpty: true\n      };\n    });\n  }\n\n  handlePalette(value) {\n    this.setState({\n      palette: value\n    });\n  }\n\n  checkForm() {\n    if (localStorage.getItem(\"data\")) {\n      const data = JSON.parse(localStorage.getItem(\"data\"));\n      let valores = Object.values(data);\n      const emptyItem = valores.filter(item => {\n        return item === \"\";\n      });\n      console.log(emptyItem);\n\n      if (emptyItem.length <= 1) {\n        this.setState({ ...this.state.isEmpty,\n          isEmpty: false\n        });\n      }\n    }\n  }\n\n  handleChange(ev) {\n    const atrib = ev.currentTarget.id;\n    const value = ev.currentTarget.value;\n    if (value === \"\") this.setState({ ...this.state.isEmpty,\n      isEmpty: true\n    });\n    this.setState(() => {\n      return {\n        [atrib]: value\n      };\n    });\n    this.checkForm();\n  }\n\n  handleClickCreate() {\n    this.setState({ ...this.state.apiObject,\n      apiObject: {\n        isLoading: true\n      }\n    });\n    const data = {\n      palette: this.state.palette,\n      name: this.state.name,\n      job: this.state.job,\n      phone: this.state.phone,\n      photo: this.state.photo.url,\n      email: this.state.email,\n      linkedin: this.state.linkedin,\n      github: this.state.github\n    };\n    getDataFromApi(data).then(response => {\n      console.log(response);\n\n      if (response.success === true) {\n        this.setState({ ...this.state.apiObject,\n          apiObject: {\n            apiError: \"\",\n            apiCardURL: response.cardURL,\n            apiSuccess: true,\n            apiCall: true,\n            isLoading: false\n          }\n        });\n      } else {\n        this.setState({ ...this.state.apiObject,\n          apiObject: {\n            apiError: response.error,\n            apiCardURL: \"\",\n            apiSuccess: false,\n            apiCall: true,\n            isLoading: false\n          }\n        });\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"main-all\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"main-all__photo main-all__img\",\n          children: /*#__PURE__*/_jsxDEV(PreviewCard, {\n            name: this.state.name,\n            job: this.state.job,\n            phone: this.state.phone,\n            email: this.state.email,\n            linkedin: this.state.linkedin,\n            github: this.state.github,\n            photo: this.state.photo.url,\n            palette: this.state.palette,\n            handleReset: this.handleReset\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"main-all__photo main-photo__design\",\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            name: this.state.name,\n            job: this.state.job,\n            phone: this.state.phone,\n            email: this.state.email,\n            linkedin: this.state.linkedin,\n            github: this.state.github,\n            photo: this.state.photo,\n            palette: this.state.palette // inputValue={this.state}\n            ,\n            handleChange: this.handleChange,\n            updateAvatar: this.updateAvatar,\n            handlePalette: this.handlePalette,\n            handleClickCreate: this.handleClickCreate,\n            apiObject: this.state.apiObject,\n            isEmpty: this.state.isEmpty\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default CardGenerator;","map":{"version":3,"sources":["/Users/ichi/Desktop/ADALAB/REPOSITORIOS/AwesomeProfileCardServer/Web/src/components/CardGenerator.js"],"names":["React","Header","Footer","PreviewCard","Form","getDataFromApi","CardGenerator","Component","constructor","props","state","palette","name","job","phone","photo","url","isAvatarDefault","email","linkedin","github","apiObject","isLoading","apiError","apiCardURL","apiSuccess","apiCall","isEmpty","handleChange","bind","handleReset","updateAvatar","handlePalette","setLocalStorage","getLocalStorage","handleClickCreate","checkForm","componentDidMount","componentDidUpdate","data","localStorage","setItem","JSON","stringify","getItem","parse","setState","img","newPhoto","value","valores","Object","values","emptyItem","filter","item","console","log","length","ev","atrib","currentTarget","id","then","response","success","cardURL","error","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport PreviewCard from \"./PreviewCard\";\r\nimport Form from \"./Form\";\r\nimport getDataFromApi from \"../service/api.js\";\r\n\r\nclass CardGenerator extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      palette: 1,\r\n      name: \"\",\r\n      job: \"\",\r\n      phone: \"\",\r\n      photo: {\r\n        url: \"\",\r\n        isAvatarDefault: false,\r\n      },\r\n      email: \"\",\r\n      linkedin: \"\",\r\n      github: \"\",\r\n      apiObject: {\r\n        isLoading: false,\r\n        apiError: \"\",\r\n        apiCardURL: \"\",\r\n        apiSuccess: false,\r\n        apiCall: false,\r\n      },\r\n      isEmpty: true,\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleReset = this.handleReset.bind(this);\r\n    this.updateAvatar = this.updateAvatar.bind(this);\r\n    this.handlePalette = this.handlePalette.bind(this);\r\n    this.setLocalStorage = this.setLocalStorage.bind(this);\r\n    this.getLocalStorage = this.getLocalStorage.bind(this);\r\n    this.handleClickCreate = this.handleClickCreate.bind(this);\r\n    this.checkForm = this.checkForm.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    // console.log(\"entro en didmount\");\r\n    this.getLocalStorage(\"data\");\r\n    this.checkForm();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    // console.log(\"entro en didupdate\");\r\n    this.setLocalStorage();\r\n  }\r\n\r\n  setLocalStorage() {\r\n    const data = {\r\n      palette: this.state.palette,\r\n      name: this.state.name,\r\n      job: this.state.job,\r\n      phone: this.state.phone,\r\n      photo: this.state.photo.url,\r\n      email: this.state.email,\r\n      linkedin: this.state.linkedin,\r\n      github: this.state.github,\r\n    };\r\n    localStorage.setItem(\"data\", JSON.stringify(data));\r\n  }\r\n\r\n  getLocalStorage() {\r\n    if (localStorage.getItem(\"data\")) {\r\n      const data = JSON.parse(localStorage.getItem(\"data\"));\r\n      this.setState({\r\n        palette: data.palette,\r\n        name: data.name,\r\n        job: data.job,\r\n        phone: data.phone,\r\n        photo: {\r\n          url: data.photo,\r\n        },\r\n        email: data.email,\r\n        linkedin: data.linkedin,\r\n        github: data.github,\r\n      });\r\n    }\r\n  }\r\n\r\n  updateAvatar(img) {\r\n    const { photo } = this.state;\r\n    this.setState(() => {\r\n      const newPhoto = { ...photo, url: img, isAvatarDefault: false };\r\n      return {\r\n        photo: newPhoto,\r\n      };\r\n    });\r\n  }\r\n\r\n  handleReset() {\r\n    this.setState(() => {\r\n      return {\r\n        palette: 1,\r\n        name: \"\",\r\n        job: \"\",\r\n        phone: \"\",\r\n        photo: \"\",\r\n        email: \"\",\r\n        linkedin: \"\",\r\n        github: \"\",\r\n        isEmpty: true,\r\n      };\r\n    });\r\n  }\r\n\r\n  handlePalette(value) {\r\n    this.setState({\r\n      palette: value,\r\n    });\r\n  }\r\n  checkForm() {\r\n    if (localStorage.getItem(\"data\")) {\r\n      const data = JSON.parse(localStorage.getItem(\"data\"));\r\n\r\n      let valores = Object.values(data);\r\n\r\n      const emptyItem = valores.filter((item) => {\r\n        return item === \"\";\r\n      });\r\n      console.log(emptyItem);\r\n      if (emptyItem.length <= 1) {\r\n        this.setState({ ...this.state.isEmpty, isEmpty: false });\r\n      }\r\n    }\r\n  }\r\n  handleChange(ev) {\r\n    const atrib = ev.currentTarget.id;\r\n    const value = ev.currentTarget.value;\r\n    if (value === \"\") this.setState({ ...this.state.isEmpty, isEmpty: true });\r\n    this.setState(() => {\r\n      return {\r\n        [atrib]: value,\r\n      };\r\n    });\r\n    this.checkForm();\r\n  }\r\n\r\n  handleClickCreate() {\r\n    this.setState({ ...this.state.apiObject, apiObject: { isLoading: true } });\r\n    const data = {\r\n      palette: this.state.palette,\r\n      name: this.state.name,\r\n      job: this.state.job,\r\n      phone: this.state.phone,\r\n      photo: this.state.photo.url,\r\n      email: this.state.email,\r\n      linkedin: this.state.linkedin,\r\n      github: this.state.github,\r\n    };\r\n    getDataFromApi(data).then((response) => {\r\n      console.log(response);\r\n      if (response.success === true) {\r\n        this.setState({\r\n          ...this.state.apiObject,\r\n          apiObject: {\r\n            apiError: \"\",\r\n            apiCardURL: response.cardURL,\r\n            apiSuccess: true,\r\n            apiCall: true,\r\n            isLoading: false,\r\n          },\r\n        });\r\n      } else {\r\n        this.setState({\r\n          ...this.state.apiObject,\r\n          apiObject: {\r\n            apiError: response.error,\r\n            apiCardURL: \"\",\r\n            apiSuccess: false,\r\n            apiCall: true,\r\n            isLoading: false,\r\n          },\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Header></Header>\r\n        <main className=\"main-all\">\r\n          <section className=\"main-all__photo main-all__img\">\r\n            <PreviewCard\r\n              name={this.state.name}\r\n              job={this.state.job}\r\n              phone={this.state.phone}\r\n              email={this.state.email}\r\n              linkedin={this.state.linkedin}\r\n              github={this.state.github}\r\n              photo={this.state.photo.url}\r\n              palette={this.state.palette}\r\n              handleReset={this.handleReset}\r\n            ></PreviewCard>\r\n          </section>\r\n          <section className=\"main-all__photo main-photo__design\">\r\n            <Form\r\n              name={this.state.name}\r\n              job={this.state.job}\r\n              phone={this.state.phone}\r\n              email={this.state.email}\r\n              linkedin={this.state.linkedin}\r\n              github={this.state.github}\r\n              photo={this.state.photo}\r\n              palette={this.state.palette}\r\n              // inputValue={this.state}\r\n              handleChange={this.handleChange}\r\n              updateAvatar={this.updateAvatar}\r\n              handlePalette={this.handlePalette}\r\n              handleClickCreate={this.handleClickCreate}\r\n              apiObject={this.state.apiObject}\r\n              isEmpty={this.state.isEmpty}\r\n            ></Form>\r\n          </section>\r\n        </main>\r\n        <Footer></Footer>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CardGenerator;\r\n"]},"metadata":{},"sourceType":"module"}